<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="style.css">
  <title>Enhanced Calculator</title>
</head>
<body>
  <div class="calculator-container">
    <div class="calculator-display">
      <p class="js-calculation">0</p>
    </div>

    <div class="calculator-buttons">
      <button onclick="updateCalculation('1')">1</button>
      <button onclick="updateCalculation('2')">2</button>
      <button onclick="updateCalculation('3')">3</button>
      <button class="operator" onclick="updateCalculation(' + ')">+</button>

      <button onclick="updateCalculation('4')">4</button>
      <button onclick="updateCalculation('5')">5</button>
      <button onclick="updateCalculation('6')">6</button>
      <button class="operator" onclick="updateCalculation(' - ')">-</button>

      <button onclick="updateCalculation('7')">7</button>
      <button onclick="updateCalculation('8')">8</button>
      <button onclick="updateCalculation('9')">9</button>
      <button class="operator" onclick="updateCalculation(' * ')">*</button>

      <button onclick="updateCalculation('0')">0</button>
      <button onclick="updateCalculation('.')">.</button>
      <button class="operator" onclick="calculateResult()">=</button>
      <button class="operator" onclick="updateCalculation(' / ')">/</button>

      <button class="clear-btn" onclick="clearCalculation()">Clear</button>
    </div>
  </div>

  <script>
    let calculation = localStorage.getItem('calculation') || '';
    displayCalculation();

    function updateCalculation(value) {
      calculation += value;
      displayCalculation();
      localStorage.setItem('calculation', calculation);
    }

    function displayCalculation() {
      document.querySelector('.js-calculation').innerHTML = calculation || 0;
    }

    function calculateResult() {
      try {
        calculation = eval(calculation);
      } catch (error) {
        calculation = 'Error';
      }
      displayCalculation();
      localStorage.setItem('calculation', calculation);
    }

    function clearCalculation() {
      calculation = '';
      displayCalculation();
      localStorage.setItem('calculation', calculation);
    }

    // Keyboard support
    document.addEventListener('keydown', function(event) {
      const allowedKeys = "0123456789+-*/.=EnterBackspace";
      if (!allowedKeys.includes(event.key)) return;

      if (event.key >= '0' && event.key <= '9') updateCalculation(event.key);
      else if (['+', '-', '*', '/'].includes(event.key)) updateCalculation(` ${event.key} `);
      else if (event.key === '.') updateCalculation('.');
      else if (event.key === 'Enter' || event.key === '=') calculateResult();
      else if (event.key === 'Backspace') calculation = calculation.slice(0, -1);
      
      displayCalculation();
      localStorage.setItem('calculation', calculation);
    });
  </script>
</body>
</html>
